## 正则表达式

### **语法**

#### **基础概念**

* 正则表达式本身就是一个字符串，代表一种文本模式或规则，用于识别符合该规则的字符串片段。

#### **字符组**：

*   **方括号 `[...]`**：用于定义一个字符集，匹配其中任意一个字符。可以包含多个字符，也可以使用范围表示法（如`[a-z]`表示匹配任意小写字母），还可以使用反向字符集（如`[^a-z]`表示匹配除小写字母外的任意字符）。

#### **预定义字符**：

*   **预定义字符**：正则表达式中有一些预定义字符，它们具有特殊的含义。

    *   `\s`：匹配任何空白字符（空格、制表符、换页符等）。
    *   `\S`：匹配任何非空白字符。
    *   `\d`：匹配数字字符。
    *   `\D`：匹配非数字字符。
    *   `\w`：匹配字母、数字、下划线。
    *   `\W`：匹配非字母、数字、下划线。
    *   `\t`：匹配制表符。
    *   `\n`：匹配换行符。
    *   `.`（点）：匹配除换行符外的任意单个字符。

#### **定位符**：

*   **^**：匹配字符串的开始位置。
*   **\$**：匹配字符串的结束位置，或行尾（在多行模式下）。
*   **\b**：匹配单词边界，即在单词与空格、标点或其他非单词字符之间的位置。
*   **\B**：匹配非单词边界。

#### **转义字符**：
*   **反斜杠 `\`**：用于转义特殊字符，使其失去特殊含义，或赋予一个特殊含义。例如，`\.`匹配点字符，`\*`匹配星号字符`\n`：匹配换行符等。


#### **选择**：

*   **竖线 `|`**：表示选择或分支，匹配左侧或右侧的表达式。


#### **限定符**：

*   **重复次数**：元字符后面的限定符控制其前一个原子（或原子组）的重复次数。常见的限定符包括：
    *   `*`：匹配前一个原子零次或多次。
    *   `+`：匹配前一个原子一次或多次。
    *   `?`：匹配前一个原子零次或一次。
    *   `{n}`：精确匹配前一个原子n次。
    *   `{n,}`：匹配前一个原子至少n次。
    *   `{n,m}`：匹配前一个原子n到m次（包含n和m）。

*   **贪婪与懒惰**：
    *   默认情况下，`*`, `+`, `?`, `{n,}`, `{n,m}`等限定符是贪婪的，即尽可能多地匹配字符。
    *   可以在限定符后添加`?`（如`*?`, `+?`, `??`, `{n,}?`, `{n,m}?`）使其变为懒惰或非贪婪模式，此时它们将尽可能少地匹配字符。


#### **分组与捕获**：

*   **圆括号 `()`**：用于创建一个子表达式或分组，可以对分组内的模式应用限定符，并且可以捕获匹配的内容供后续引用或提取。
    *   **捕获组**：编号从左到右递增，从1开始，可以通过反向引用`\n`（n为组号）引用捕获的内容。
    *   **非捕获组 `(?:...)`**：不捕获匹配内容，仅用于分组和限定符作用，不占用捕获组编号。
*   **反向引用**：通过`\1`、`\2`等引用前面捕获组匹配的内容。
*   **替换**：通过`$1`、`$2`等引用前面捕获组匹配的内容（替换时使用）。


#### **断言**

*   **正向先行断言 `(?=...)`**：匹配后面是特定模式的字符串。
*   **反向先行断言 `(?!...)`**：匹配后面不是特定模式的字符串。
*   **正向后行断言 `(?<=...)`**：匹配前面是特定模式的字符串。
*   **反向后行断言 `(?<!...)`**：匹配前面不是特定模式的字符串。


#### **模式修饰符**：

*   **Flags**：附加在正则表达式末尾的单个字符，用于改变匹配行为，如：
    *   `i`：忽略大小写。
    *   `g`：全局搜索，查找所有匹配而非仅第一个。
    *   `m`：多行模式，使`^`和`$$`匹配每一行的开始和结束。


### **示例**

1.  **匹配邮箱地址**：

```regex
^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$
```

解释：

*   `^` 表示匹配字符串的开始。
*   `[a-zA-Z0-9._%+-]+` 匹配由字母、数字、点、下划线、百分号、加号、减号组成的字符串，至少出现一次。
*   `@` 匹配字符`@`。
*   `[a-zA-Z0-9.-]+` 匹配由字母、数字、点、减号组成的字符串，至少出现一次。
*   `\.` 匹配字符`.`（需用反斜杠转义，因为`.`在正则中通常表示匹配任意字符）。
*   `[a-zA-Z]{2,}` 匹配由字母组成的字符串，至少出现两次。
*   `$$` 表示匹配字符串的结束。

这个正则表达式可以匹配常见的电子邮件地址格式，如 `user@example.com`。

